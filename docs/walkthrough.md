# 학생 상세 분할 뷰 및 코멘트 시스템 워크스루

## 변경 사항

### 1. 분할 뷰 레이아웃
- `Students.tsx`를 반응형 분할 뷰 레이아웃을 사용하도록 리팩토링했습니다.
- **데스크탑**: 왼쪽에 학생 목록, 오른쪽에 선택된 학생의 상세 정보를 표시합니다.
- **모바일**: 목록과 상세 뷰 간을 전환합니다.

### 2. 학생 상세 컴포넌트
- `StudentDetail.tsx`를 생성했습니다.
- 학생 프로필 및 학년 기록을 표시합니다.
- 새로운 **선생님 코멘트 섹션**을 포함합니다.
    - 선생님이 코멘트를 추가할 수 있습니다 (기록에 'NOTE'로 저장됨).
    - 수정 제한: 학생의 현재 학년 담당 선생님만 코멘트를 추가할 수 있습니다 (유효성 검사 추가됨).

### 3. 데이터 스토어
- `HistoryLog` 타입을 `'NOTE'`를 포함하도록 업데이트했습니다.
- 스토어에서 학생을 제거하기 위해 `deleteStudent` 액션을 추가했습니다.

### 4. 개선 사항
- **학생 삭제**: 학생 상세 뷰에 확인 기능이 있는 삭제 버튼(휴지통 아이콘)을 추가했습니다.
- **코멘트 필터링**: 선생님 코멘트 섹션은 이제 'NOTE' 유형의 기록만 필터링하여 표시하고 시스템 메시지(진급, 담당 변경)는 숨깁니다.
- **이름 수정**: 학생 상세 뷰의 이름 옆에 연필 아이콘을 추가하여 이름을 즉시 수정할 수 있게 했습니다.
- **선생님 관리**: 선생님 이름, 전화번호, 담당 학년을 수정하는 기능을 추가했습니다. 선생님 카드에 인라인 수정 모드를 추가했습니다.
- **필터링**:
    - **대시보드**: "최근 활동" 섹션을 제거했습니다.
    - **선생님 목록**: 학년별로 선생님을 필터링하는 드롭다운을 추가했습니다.
    - **학생 상세**: 선생님 드롭다운이 이제 학생의 학년과 일치하는(또는 담당이 없는) 선생님만 표시하도록 필터링됩니다.
### 5. 추가된 주요 기능
- **프로필 사진**: 학생과 선생님 모두 프로필 사진을 등록하고 표시할 수 있습니다 (자동 리사이징 및 압축 적용).
- **반 (Class) 선택**: 선생님은 담당 학년과 함께 **1반 ~ 10반**을 선택할 수 있습니다.
- **졸업 (Graduation)**: 학생 상태 변경 시 '졸업' 옵션을 선택할 수 있으며, 이 경우 담당 선생님이 자동으로 해제됩니다.
- **스마트 필터링**:
    - 학생 추가/이동 시 선생님 목록은 선택된 학년의 선생님만 표시합니다.
    - 선생님이 배정된 반(예: 3반) 정보가 드롭다운에 함께 표시되어 선택이 용이합니다.

## 검증 결과

### 수동 테스트
- [x] **분할 뷰**: 데스크탑에서 학생을 클릭하면 측면 패널이 열립니다.
- [x] **코멘트**: 선생님을 선택하면 학년 유효성 검사 로직(올바른 학년의 선생님만 게시 가능)과 일치합니다.
- [x] **기록**: 코멘트 섹션에는 선생님 코멘트만 표시되며 시스템 로그는 숨겨집니다.
- [x] **삭제**: 휴지통 아이콘을 클릭하면 확인창이 뜨고 학생이 삭제됩니다.
- [x] **이름 수정**: 연필 아이콘을 클릭하면 입력창이 토글되고, 저장하면 이름이 즉시 업데이트됩니다.
- [x] **선생님 수정**: 선생님 카드의 연필을 클릭하면 인라인 수정이 활성화됩니다. 저장 시 변경 사항이 유지됩니다.
- [x] **사이트 이름**: 제목과 헤더가 "StudentOn"인지 확인했습니다.
- [x] **필터링**: "최근 활동"이 사라진 것을 확인했습니다. 선생님 목록이 학년별로 올바르게 필터링됩니다.
- [x] **학생 필드**: 새 필드(생년월일, 성별, 구원일, 주소)가 올바르게 저장되고 표시됩니다.
- [x] **사진**: 학생 및 선생님 사진 업로드, 표시, 수정이 정상 동작합니다.
- [x] **반/졸업**: 선생님 반 배정(1-10반) 및 학생 졸업 처리가 정상 동작합니다.

### 자동화된 확인
- [x] `tsc -b`: 통과함 (타입 안전성 확인됨).

# 학생 상세 분할 뷰 및 코멘트 시스템

이 계획은 학생 상세 팝업을 분할 뷰 인터페이스로 대체하고, 해당 학년 담당 선생님이 코멘트를 추가할 수 있는 기능을 추가하라는 사용자의 요청을 해결합니다.

## 사용자 검토 필요

> [!IMPORTANT]
> **인증 가정**: 실제 인증 시스템이 없으므로, 코멘트 섹션에 "작성자..." 드롭다운을 추가하여 어떤 선생님이 코멘트를 남기는지 시뮬레이션할 것입니다. 이를 통해 "학년 제한" 로직을 테스트할 수 있습니다.

## 제안된 변경 사항

### 데이터 계층
#### [수정] [useStore.ts](file:///c:/Users/AJ/Desktop/AI_TEST/src/store/useStore.ts)
- `HistoryLog` 인터페이스 `type`에 `'NOTE'`를 추가합니다.
- 이를 통해 기존 기록 시스템을 사용하여 선생님 코멘트를 저장할 수 있습니다.

### 컴포넌트
#### [신규] [StudentDetail.tsx](file:///c:/Users/AJ/Desktop/AI_TEST/src/components/StudentDetail.tsx)
- **목적**: 선택된 학생의 상세 정보와 코멘트를 표시합니다.
- **기능**:
    - 학생 프로필 (이름, 학년, 연락처).
    - 기록 및 코멘트 피드.
    - 코멘트 입력 양식:
        - 선생님 선택기 포함 (인증 시뮬레이션).
        - 선택된 선생님의 담당 학년이 학생의 학년과 일치하는 경우에만 게시 허용 로직.
    - "진급" 버튼/액션이 모달에서 여기로 이동(또는 모달 열기).

#### [수정] [StudentList.tsx](file:///c:/Users/AJ/Desktop/AI_TEST/src/components/StudentList.tsx)
- 모달을 트리거하는 내부 `selectedStudent` 상태를 제거합니다.
- 부모 컴포넌트(`Students.tsx`)에 선택을 알리기 위한 `onSelect` prop을 추가합니다.
- 활성 행을 강조 표시하기 위한 `selectedId` prop을 추가합니다.
- 반응형 레이아웃을 조정합니다 (분할 시 테이블에 가로 스크롤이 필요할 수 있음).

#### [수정] [Students.tsx](file:///c:/Users/AJ/Desktop/AI_TEST/src/pages/Students.tsx)
- 분할 화면 레이아웃을 구현합니다.
    - 왼쪽: `StudentList`
    - 오른쪽: `StudentDetail` (조건부 렌더링 또는 선택되지 않았을 때 플레이스홀더).
- 여기서 `selectedStudentId` 상태를 관리합니다.

### 추가 구현 사항 (완료됨)
#### 1. 프로필 사진 관리
- **이미지 압축**: 브라우저에서 이미지 크기 조정 및 압축 (`utils/imageUtils.ts`).
- **저장소**: Base64 문자열로 상태에 직접 저장.
- **UI**: 학생 및 선생님 목록/상세/수정 폼에 이미지 업로더 추가.

#### 2. 반 (Class) 및 학년 관리
- **선생님**: `assignedGrade`와 함께 `assignedClass` (1-10반) 속성 추가.
- **학생**: 
    - 학생 추가/이동 시 **학년**을 선택하면 해당 학년의 선생님만 필터링.
    - 선생님 이름 옆에 반 정보 표시 (예: "홍길동 (초등1 3반)").
- **졸업**: 진급 모달에 '졸업' 옵션 추가. 선택 시 선생님 배정 해제.

## 검증 계획

### 수동 검증
1.  **분할 뷰**:
    - `/students`로 이동합니다.
    - 목록에서 학생을 클릭합니다.
    - 화면이 분할되어(또는 나란히) 왼쪽에 `StudentList`, 오른쪽에 `StudentDetail`이 표시되는지 확인합니다.
2.  **코멘트 제한**:
    - 학생을 선택합니다 (예: "초등1학년").
    - `StudentDetail` 코멘트 섹션에서 "고등1학년" 담당 선생님을 선택해 봅니다.
    - 입력이 비활성화되거나 "코멘트 추가" 버튼이 비활성화/숨겨지는지 확인합니다.
    - "초등1학년" 담당 선생님을 선택합니다.
    - 코멘트를 추가할 수 있는지 확인합니다.
    - 코멘트를 추가하고 기록 목록에 즉시 나타나는지 확인합니다.
3.  **반응형**:
    - 창 크기를 모바일 크기로 조정합니다. 합리적인 레이아웃(아마도 스택형)인지 확인합니다.
